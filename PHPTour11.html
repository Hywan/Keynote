<!DOCTYPE html>

<html>
<head>
  <title>Title</title>
  <meta http-equiv="content-type" content="text/html;       charset=utf-8" />
  <meta http-equiv="content-type" content="text/javascript; charset=utf-8" />
  <meta http-equiv="content-type" content="text/css;        charset=utf-8" />

  <link type="text/css" href="Template/Css/DZSlides.css" rel="stylesheet" />
  <link type="text/css" href="Template/Css/Theme.css"    rel="stylesheet" />
</head>
<body>

<section class="front">
  <h1>Hoa, un ensemble de bibliothèques</h1>
  <footer>par Ivan Enderlin</footer>
</section>

<!--

Qu'est-ce qu'on avait ?
Qu'est-ce qu'on veut ?
Comment on l'a fait ?
Ce que ça nous a apporté ?

-->

<section>
  <h1>Qui suis-je ?</h1>

  <p><ul>
    <li>Ivan <span class="lastname">Enderlin</span></li>
    <li>doctorant en Informatique (<a href="http://lifc.univ-fcomte.fr/">LIFC</a>/<a href="http://www.inria.fr/">INRIA</a>)</li>
    <li>leader et développeur de Hoa</li>
    <li>contributeur <a href="http://php.net/">PHP</a>,
    <a href="https://mozilla.org/">Mozilla</a>,
    <a href="http://debian.org/">Debian</a> … open-source</li>
    <li>expert invité au <a href="http://w3.org/">W3C</a> (HTML, CSS,
    WebApp)</li>
    <li><a href="https://twitter.com/#!/hoaproject">@hoaproject</a></li>
  </ul></p>

  <p class="thus">
  <math>
    <mrow>
      <mtext>ivan.enderlin@</mtext>
      <mo>{</mo>
      <mtable>
        <mtr>
          <mtd><mtext>hoa-project.net</mtext></mtd>
        </mtr>
        <mtr>
          <mtd><mtext>lifc.univ-fcomte.fr</mtext></mtd>
        </mtr>
        <mtr>
          <mtd><mtext>inria.fr</mtext></mtd>
        </mtr>
      </mtable>
    </mrow>
  </math>
  </p>
</section>

<section>
  <h1>Contexte</h1>

  <p>Avant :<ul>
    <li>petits sites Web</li>
    <li>équipes de quelques personnes</li>
    <li>développement <del>anarchique</del> peu organisé</li>
  </ul></p>

  <p>Maintenant :<ul>
    <li>moyennes et grandes applications</li>
    <li>équipes de plus en plus nombreuses</li>
    <li>développement <del>semi-anarchique</del> en nette progression</li>
  </ul></p>
</section>

<section>
  <h1>Motivations</h1>

  <p>Pour nous :<ul>
    <li>mutualiser les efforts</li>
    <li>automatiser plus de tâches</li>
    <li>travailler plus vite : développement, maintenance …</li>
  </ul></p>

  <p>Pour PHP :<ul>
    <li>plus de professionnalisme : organisation, qualité, tests …</li>
    <li>plus de standards</li>
    <li>plus de fun : PHP offre ce qu'il faut !</li>
  </ul></li>
</section>

<section>
  <h1>Bibliothèque</h1>

  <q cite="moi">Une bibliothèque est un ensemble de fonctionnalités dédiées à la
  résolution d'un problème précis et isolé, grâce à son abstraction la plus
  élevée</q>
  <q cite="toujours moi">L'abstraction permet de s'adapter à plus de formes de
  problèmes</q>
  <p class="thus">la Force est dans l'abstraction</p>
</section>

<section>
  <h1>Contributions</h1>

  <p class="thus vspace">Hoa : un ensemble de bibliothèques PHP</p>
  <p class="thus">Hoa : un pont entre la recherche et l'entreprise</p>
</section>

<section>
  <h1>Plan</h1>

  <ol>
    <li>Installation et découverte</li>
    <li>Couche framework</li>
    <li>Quelques bibliothèques notables</li>
    <li>Hoathis et autres projets autour de Hoa</li>
    <li>Conclusion et perspectives</li>
  </ol>
</section>

<section>
  <h1>Installation</h1>

  <div class="stack incremental">

  <div>
  <p><ul>
    <li>Emplacement par défaut (sous Unix) :
       <code>/usr/local/lib/hoa</code></li>
    <li>Formats : <code>.7z</code>, <code>.tar.gz</code>, <code>.tar.bz2</code>,
    <code>.zip</code>, <a href="http://php.net/phar"><code>.phar</code></a>
    ⚑</li>
  </ul></p>
  <pre><code>$ wget http://download.hoa-project.net/Central/Hoa.next.phar
$ php Hoa.next.phar --extract</code></pre>
  <p><ul>
    <li><em>Versionning</em> : <a href="http://mercurial.selenic.com/">Mercurial</a></li>
  </ul></p>
  <pre><code>$ hg clone http://hg.hoa-project.net/Central .</code></pre>

  <p class="thus">Un seul exemplaire de Hoa pour plusieurs applications !</p>
  </div>

  <div class="stack-em">
  <p>Astuces :<ul>
    <li>index des dépôts :
    <a href="http://hg.hoa-project.net/">hg.hoa-project.net</a></li>
    <li>architecture des archives</li>
    <li data-item="=">architecture des dépôts</li>
  </ul></p>
  </div>

  </div>
</section>

<section>
  <h1>Architecture</h1>

  <p><ul>
    <li><code>Bin</code>, les outils</li>
    <li><code>Core</code>, le noyau</li>
    <li><code>Library</code>, les bibliothèques standards (famille
        <code>Hoa</code>)</li>
    <li><code>Module</code>, les bibliothèques utilisateurs (famille
        <code>Hoathis</code>)</li>
    <li><code>Stub</code>, exportation de Hoa</li>
  </ul></p>

  <p>Seul le noyau est nécessaire :</p>
  <pre><code><span class="token-keyword">require</span> <span class="token-string">'/usr/local/lib/hoa/Core/Core.php'</span>;
<span class="token-id">var_dump</span>(<span class="token-id">HOA</span>);</code></pre>
</section>

<section>
  <h1>Noyau</h1>

  <p>Quelques couches du noyau :<ul>
    <li><em lang="en">Core</em>, base fondamentale du noyau</li>
    <li><em lang="en">Consistency</em>, consistence pour Hoa et PHP</li>
    <li><em lang="en">Event</em>, événements et écouteurs</li>
    <li><em lang="en">Exception</em>, exceptions enrichies</li>
    <li><em lang="en">Protocol</em>, gestion de <code>hoa://</code></li>
  </ul></p>
</section>

<section>
  <h1>Outils</h1>

  <p class="thus">Un script important : <code>hoa</code></p>
  <p>Propose des outils liés aux bibliothèques :<ul>
    <li><code>debugger</code>, un client pour le debugger de Hoa</li>
    <li><code>bhoa</code>, un petit server HTTP léger et rapide</li>
    <li><code>test:*</code>, pour les tests</li>
    <li><code>worker:*</code>, pour les workers</li>
    <li>etc.</li>
  </ul></p>
</section>

<section>
  <h1>hoa://</h1>

  <p>Abstraction des accès aux ressources, 3 racines proposées :<ul>
    <li><code>hoa://Application</code>, pour l'application</li>
    <li><code>hoa://Data</code>, pour les données de l'application</li>
    <li><code>hoa://Library</code>, pour les bibliothèques</li>
    <li data-item="≈">liens symboliques (paramétrables)</li>
  </ul></p>
  <p class="thus">Partage, intégration et maintenance facilités</p>
</section>

<section>
  <h1>Framework ?</h1>

  <p><ul>
    <li><em>Proof-of-Concept</em></li>
    <li>Formats : <code>.7z</code>, <code>.tar.gz</code>, <code>.tar.bz2</code>,
    <code>.zip</code>, <a href="http://php.net/phar"><code>.phar</code></a>
    ⚑</li>
  </ul></p>
  <pre><code>$ wget <em>…</em>/Framework/Hoa_Framework.next.phar
$ php Hoa_Framework.next.phar --extract</code></pre>
  <p><ul>
    <li><em>Versionning</em> : <a href="http://mercurial.selenic.com/">Mercurial</a></li>
  </ul></p>
  <pre><code>$ hg clone http://hg.hoa-project.net/Framework .</code></pre>
  <p><ul>
    <li>Où est Hoa ?</li>
    <li>Script dédié à l'application : <code>myapp</code> (hérite de
    <code>hoa</code>)</li>
  </ul></p>
</section>

<section>
  <h1>Routeur et dispatcheur</h1>

  <div class="stack incremental">

  <div>
  <p class="thus">Assembler des bibliothèques pour créer de l'automatisation</p>
  <p><ul>
    <li data-item=""><code>Hoa\Router</code> extrait des données</li>
    <li data-item="+"><code>Hoa\Dispatcher</code> dispatche des données sur un
    <em>callable</em></li>
    <li data-item="+"><code>Hoa\Dispatcher\Kit</code> une structure</li>
    <li data-item="="><a href="http://hoa-project.net/Literature/Learn/Routerdispatcher.html">♥</a></li>
    <li data-item="≈">un début de MVC</li>
  </ul></p>
  </div>

  <div class="stack-em">
  <p>Exemple clé-en-main sur :<ul>
    <li><a
    href="http://hg.hoa-project.net/Sandbox">hg.hoa-project.net/Sandbox</a>
    (&amp;
    archives)</li>
    <li>voir le <em>Gordon's blog</em></li>
    <li>dossier <code>Application/</code></li>
  </ul></p>
  </div>

  </div>
  <footer>Continuons …</footer>
</section>

<section>
  <h1>Modèle</h1>

  <p><ul>
    <li><a
    href="http://hoa-project.net/Literature/Learn/Model.html">Modéliser</a> des
    données pour mieux les manipuler</li>
    <li>Textuel ou graphique</li>
  </ul></p>
  <p class="thus"><code>Hoa\Model</code> pour décrire et manipuler des
  modèles</p>
  <p><ul>
    <li>Où se trouvent les données (e.g. <code>Hoa\Database</code>,
    <code>Hoa\Xml</code> …) ?</li>
    <li>Créer un lien entre le modèle et les données</li>
    <li>Valider ses données (manuellement ou automatiquement)</li>
  </ul></p>
  <p class="thus">Abstraire et assembler pour créer de l'automatisation</p>
  <footer>Mais encore …</footer>
</section>

<section>
  <h1>XYL</h1>

  <p><ul>
    <li><em>XML Yielding Language</em>, langage d'interface graphique …</li>
    <li>… multi-plateformes : OS, bureaux, portables, tablettes etc.</li>
    <li>… multi-sorties : Web, console, PDF etc.</li>
    <li><code>&lt;yield /&gt;</code> pour créer des composants</li>
    <li><code>@bind</code> pour s'accrocher à l'arbre des données</li>
    <li><code>&lt;overlay /&gt;</code>, <code>&lt;fragment /&gt;</code>,
    <code>&lt;definition /&gt;</code>  …</li>
    <li data-item="≈">théorie des composants + <a href="http://w3.org/TR/html5/">HTML</a> + …</li>
  </ul></p>
  <p class="thus">Coder une fois, utiliser partout !</p>
</section>

<section>
  <h1>Test et Praspel</h1>

  <p><ul>
    <li><a href="http://lifc.univ-fcomte.fr/~publis/papers/Author/ENDERLIN-I.html">Travaux</a>
    au LIFC et à l'INRIA</li>
    <li>Rapport de recherche, article ICTSS'11, thèse (en cours)</li>
    <li>Praspel : un langage de spécification pour du <em>Contract-based
    Testing</em></li>
    <li>Exploite les domaines réalistes (structures algébriques)</li>
    <li><em>Runtime Assertion Checking</em></li>
    <li>Génération de tests unitaires et de données de tests automatiques</li>
    <li data-item="⚡">Thèse inscrite dans le projet <a
    href="http://squashtest.org">Squash</a></li>
  </ul></p>
</section>

<section>
  <h1>Flux</h1>

  <p><ul>
    <li><code>Hoa\Stream</code> parent de tous les flux</li>
    <li>flux bas-niveaux : <code>Hoa\File</code>, <code>Hoa\Socket</code> …</li>
    <li>flux composites, qui travaillent sur des flux :
    <code>Hoa\Xml</code> …</li>
    <li>beaucoup d'interfaces : <code>Bufferable</code>,
    <code>In</code>, <code>Lockable</code>, <code>Out</code>,
    <code>Pathable</code>, <code>Pointable</code>, <code>Statable</code>,
    <code>Structurable</code>, <code>Touchable</code> …</li>
    <li>API uniforme et élégamment simplifiée</li>
  </ul></p>
  <p class="thus">Les flux de PHP sont très puissants, ne pas les négliger</p>
</section>

<section>
  <h1>Un peu plus de fun</h1>

  <p><code>Hoa\FastCgi</code> permet d'utiliser FastCGI et donc
  PHP FastCGI :</p>
  <pre><code><span class="token-variable">$client</span>  = <span class="token-keyword">new</span> <span class="token-id">Hoa\Socket\Client</span>(<span class="token-string">'tcp://127.0.0.1:9000'</span>);
<span class="token-variable">$fastcgi</span> = <span class="token-keyword">new</span> <span class="token-id">Hoa\FastCgi\Responder</span>(<span class="token-variable">$client</span>);
<span class="token-keyword">echo</span> <span class="token-variable">$fastcgi</span>-><span class="token-id">send</span>(<span class="token-variable">$headers</span>, <span class="token-variable">$content</span>);</code></pre>
</section>

<section>
  <h1>Toujours plus du fun</h1>

  <p><code>Hoa\Worker</code> permet d'avoir des tâches asynchrones :</p>
  <pre><code><span class="token-variable">$wk</span> = <span class="token-keyword">new</span> <span class="token-id">Hoa\Worker\Backend\Shared</span>(<span class="token-string">'workerId'</span>, <span class="token-string">'pwd'</span>);
<span class="token-variable">$wk</span>-><span class="token-id">on</span>(<span class="token-string">'message'</span>, <span class="token-keyword">function</span> ( <span class="token-id">Hoa\Core\Event\Bucket</span> <span class="token-variable">$bucket</span> ) {
    // Compute $bucket->getData().
});
<span class="token-variable">$wk</span>-><span class="token-id">run</span>();</code></pre>
  <pre><code><span class="token-variable">$worker</span> = <span class="token-keyword">new</span> <span class="token-id">Hoa\Worker\Shared</span>(<span class="token-string">'workerId'</span>);
<span class="token-variable">$worker</span>-><span class="token-id">postMessage</span>(<span class="token-string">'foobar'</span>);</code></pre>
</section>

<section>
  <h1>Encore plus du fun</h1>

  <p><code>Hoa\Dns</code> permet de coder un serveur DNS :</p>
  <pre><code><span class="token-variable">$server</span> = <span class="token-keyword">new</span> <span class="token-id">Hoa\Socket\Server</span>(<span class="token-string">'udp://127.0.0.1:57005'</span>);
<span class="token-variable">$dns</span>    = <span class="token-keyword">new</span> <span class="token-id">Hoa\Dns</span>(<span class="token-variable">$server</span>);
<span class="token-variable">$dns</span>-><span class="token-id">on</span>(<span class="token-string">'query'</span>, <span class="token-keyword">function</span> ( <span class="token-id">Hoa\Core\Event\Bucket</span> <span class="token-variable">$bucket</span> ) {
    return <span class="token-string">'127.0.0.1'</span>;
});
<span class="token-variable">$dns</span>-><span class="token-id">run</span>();</code></pre>
</section>

<section>
  <h1>Overfun</h1>

  <p><code>Hoa\Websocket</code> permet d'utiliser un serveur Websocket :</p>
  <pre><code><span class="token-variable">$server</span>    = <span class="token-keyword">new</span> <span class="token-id">Hoa\Socket\Server</span>(<span class="token-string">'tcp://127.0.0.1:8889'</span>);
<span class="token-variable">$websocket</span> = <span class="token-keyword">new</span> <span class="token-id">Hoa\Websocket\Server</span>(<span class="token-variable">$server</span>);
<span class="token-variable">$websocket</span>-><span class="token-id">on</span>(<span class="token-string">'message'</span>, …);
<span class="token-variable">$websocket</span>-><span class="token-id">on</span>(<span class="token-string">'close'</span>, …);
<span class="token-variable">$websocket</span>-><span class="token-id">on</span>(<span class="token-string">'error'</span>, …);
<span class="token-variable">$websocket</span>-><span class="token-id">run</span>();</code></pre>
</section>

<section>
  <h1>Hoathis</h1>

  <p><ul>
    <li>Bibliothèques utilisateurs</li>
    <li>Mécanisme simple et rapide</li>
    <li>Enrichir et <em>hacker</em> Hoa</li>
    <li>Points de choix, e.g. :
    </li>
  </ul></p>
  <pre><code><span class="token-variable">$server</span> = <span class="token-id">dnew</span>(<span class="token-string">'(Hoathis or Hoa)\Socket\Server'</span>, …);</code></pre>

  <p class="thus">Hoa est un environnement pour écrire et maintenir des
  bibliothèques</p>
</section>

<section>
  <h1>Mais aussi …</h1>

  <p>Acl, Bench, Cache, Compiler, Console, Database, Dispatcher, Dns,
  EventSource, FastCgi, File, Filter, Graph, Http, Iterator, Json, Locale, Log,
  Mail, Memory, Mime, Model, Notification, Observer, Php, Prototype, Realdom,
  Reflection, Regex, Registry, Router, Serialize, Session, Socket, Stream,
  StringBuffer, Test, Translate, Tree, Uri, View, Visitor, Websocket, Worker,
  Xml, XmlRpc, Xyl, Yaml, Zombie, xcallable, from, import, dnew, curry, event,
  resolve, memoize, ƒ, zFormat, Praspel …</p>
</section>

<section>
  <h1>Autres projets autour de Hoa</h1>

  <p><ul>
    <li>Hoathis.net, une forge open-source pour partager les Hoathis et
    expérimenter Hoa sur un très gros projet</li>
    <li>Virthoasity, une machine virtuelle pour du développement Web,
    non-intrusive et simple</li>
    <li>Launchee, un interpréteur XYL pour des applications bureaux</li>
    <li>Sandbox, un ensemble de programmes clé-en-main pour découvrir Hoa par le
    code</li>
    <li>Mais aussi : Khoala, Hoapi …</li>
  </ul></p>
</section>

<section>
  <h1>Documentation</h1>

  <p><ul>
    <li>En cours d'écriture /o\ …</li>
    <li>… mais avance vite \o/</li>
    <li>Plusieurs manuels : <a href="http://hoa-project.net/Literature/Learn/Introduction.html">apprentissage</a>,
    référence, API,
    <em>snippets</em> …</li>
    <li>En français (pour l'instant)</li>
    <li>Pour les impatients : voir Sandbox</li>
  </ul></p>
</section>

<section>
  <h1>Conclusion</h1>

  <p>Hoa est :<ul>
    <li>un ensemble de bibliothèques</li>
    <li>un environnement pour développer des bibliothèques</li>
    <li>un pont entre la recherche et l'entreprise</li>
  </ul></p>
  <p>Hoa framework est :<ul>
    <li>un <em>proof-of-concept</em> de la puissance des bibliothèques</li>
    <li>un porte d'entrée facile dans Hoa</li>
  </ul></p>
</section>

<section>
  <h1>Perspectives</h1>

  <p><ul>
    <li>Version courante : 1.0.0ß6 … ☞ une release ?</li>
    <li>Continuer la documentation, toujours être pédagogique</li>
    <li>Hoathis.net pour éprouver Hoa sur un très gros projet</li>
    <li>Faire une bonne thèse \o/</li>
    <li>Écrire des Hoathis pour inclure d'autres projets</li>
  </ul></p>
</section>

<section class="thanks">
  <h1>Merci &amp; questions</h1>

  <p>Un grand merci pour votre attention</p>
  <p>Des questions ?</p>
  <p class="thus"><a href="http://hoa-project.net/">hoa-project.net</a></p>
</section>

<script src="Template/Script/DZSlides.js"></script>

</body>
</html>
